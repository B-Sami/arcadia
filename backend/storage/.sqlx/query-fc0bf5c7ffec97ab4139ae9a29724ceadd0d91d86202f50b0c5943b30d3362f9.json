{
  "db_name": "PostgreSQL",
  "query": "\n        SELECT json_build_object(\n                    'torrent_request', tr,\n                    'title_group', tg,\n                    'affiliated_artists', COALESCE((\n                        SELECT json_agg(\n                            json_build_object(\n                                'id', aa.id,\n                                'title_group_id', aa.title_group_id,\n                                'artist_id', aa.artist_id,\n                                'roles', aa.roles,\n                                'nickname', aa.nickname,\n                                'created_at', aa.created_at,\n                                'created_by_id', aa.created_by_id,\n                                'artist', json_build_object(\n                                    'id', a.id,\n                                    'name', a.name,\n                                    'created_at', a.created_at,\n                                    'created_by_id', a.created_by_id,\n                                    'description', a.description,\n                                    'pictures', a.pictures,\n                                    'title_groups_amount', a.title_groups_amount,\n                                    'edition_groups_amount', a.edition_groups_amount,\n                                    'torrents_amount', a.torrents_amount,\n                                    'seeders_amount', a.seeders_amount,\n                                    'leechers_amount', a.leechers_amount,\n                                    'snatches_amount', a.snatches_amount\n                                )\n                            )\n                        )\n                        FROM affiliated_artists aa\n                        JOIN artists a ON a.id = aa.artist_id\n                        WHERE aa.title_group_id = tg.id\n                    ), '[]'::json),\n                    'series', COALESCE((\n                        SELECT json_build_object('id', s.id, 'name', s.name)\n                        FROM series s\n                        WHERE s.id = tg.series_id\n                    ), '{}'::json),\n                    'votes', COALESCE((\n                        SELECT json_agg(\n                            json_build_object(\n                                'id', trv3.id,\n                                'torrent_request_id', trv3.torrent_request_id,\n                                'created_at', trv3.created_at,\n                                'created_by_id', trv3.created_by_id,\n                                'created_by', json_build_object(\n                                    'id', u.id,\n                                    'username', u.username,\n                                    'warned', u.warned,\n                                    'banned', u.banned\n                                ),\n                                'bounty_upload', trv3.bounty_upload,\n                                'bounty_bonus_points', trv3.bounty_bonus_points\n                            )\n                            ORDER BY trv3.created_at DESC\n                        )\n                        FROM torrent_request_votes trv3\n                        JOIN users u ON u.id = trv3.created_by_id\n                        WHERE trv3.torrent_request_id = tr.id\n                    ), '[]'::json),\n                    'comments', COALESCE((\n                        SELECT json_agg(\n                            json_build_object(\n                                'id', trc.id,\n                                'torrent_request_id', trc.torrent_request_id,\n                                'created_by_id', trc.created_by_id,\n                                'created_by', json_build_object(\n                                    'id', u2.id,\n                                    'username', u2.username,\n                                    'warned', u2.warned,\n                                    'banned', u2.banned\n                                ),\n                                'content', trc.content,\n                                'created_at', trc.created_at,\n                                'updated_at', trc.updated_at\n                            )\n                            ORDER BY trc.created_at DESC\n                        )\n                        FROM torrent_request_comments trc\n                        JOIN users u2 ON u2.id = trc.created_by_id\n                        WHERE trc.torrent_request_id = tr.id\n                    ), '[]'::json)\n                ) as data\n                FROM torrent_requests tr\n                JOIN title_groups tg ON tr.title_group_id = tg.id\n                WHERE tr.id = $1\n        ",
  "describe": {
    "columns": [
      {
        "ordinal": 0,
        "name": "data",
        "type_info": "Json"
      }
    ],
    "parameters": {
      "Left": [
        "Int8"
      ]
    },
    "nullable": [
      null
    ]
  },
  "hash": "fc0bf5c7ffec97ab4139ae9a29724ceadd0d91d86202f50b0c5943b30d3362f9"
}
